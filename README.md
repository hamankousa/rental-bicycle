# レンタル自転車管理システム

**月ごとのユーザー管理と、日またぎ対応の高度な料金計算機能を備えた、高機能なレンタル自転車管理システムのデモアプリケーションです。**

---

## ✨ 主な機能 (Features)

-   **タブ切り替えUI**
    -   「ユーザー検索」と「新規登録」をタブで明確に分離し、直感的でスムーズな操作性を実現。

-   **月ごとのユーザー管理**
    -   月が変わるとユーザーリストが自動的にリセットされ、常にアクティブなユーザーのみを管理できます。
    -   新規登録は、ボタン選択とテキスト入力を組み合わせた分かりやすいフォームで行えます。
    -   階の複数選択（例: 1-2階）にも対応し、柔軟なユーザー登録が可能です。

-   **リアルタイム検索機能**
    -   登録済みユーザーを、棟・階・側でリアルタイムに絞り込み検索できます。

-   **高度な料金計算ロジック**
    -   1日の合計利用時間が8時間を超えると、超過料金が自動で発生します。
    -   **日またぎ利用に完全対応**: 23時に借りて深夜1時に返却した場合でも、利用時間を日ごとに正確に分割して計算します。

-   **管理者向け機能**
    -   過去の任意の年月の請求データを、いつでもCSV形式で一括ダウンロードできます。

---

## 🛠️ 技術スタック (Tech Stack)

| 領域         | 技術                                      |
| ------------ | ----------------------------------------- |
| フロントエンド | HTML, CSS, JavaScript (Vanilla JS)        |
| バックエンド   | Node.js, Express                          |
| データベース | Google Firebase (Firestore)               |
| その他       | json2csv (CSV生成), Postman (APIテスト)     |

---

## 🚀 ローカル環境での実行方法 (Getting Started)

このプロジェクトをあなたのPCで動かすには、以下の手順に従ってください。

### 1. 前提条件
-   [Node.js](https://nodejs.org/) (v18.x 以上推奨)
-   [Git](https://git-scm.com/)

### 2. プロジェクトのセットアップ
```bash
# 1. このリポジトリをクローンします
git clone https://github.com/hamankousa/rental-bicycle.git

# 2. プロジェクトディレクトリに移動します
cd [リポジトリ名]

# 3. バックエンドの依存関係をインストールします
cd server
npm install
```

### 3. Firebaseの設定 (最重要)
このアプリケーションは、データの保存にGoogle Firebaseを使用します。

1.  [Firebaseコンソール](https://console.firebase.google.com/)で新しいプロジェクトを作成し、**Firestore Database**を有効化します。
2.  プロジェクトの設定画面から「サービスアカウント」タブに移動し、**新しい秘密鍵を生成**してJSONファイルをダウンロードします。
3.  ダウンロードした秘密鍵JSONファイルを、このプロジェクトの **`server/`** フォルダ内に配置します。
4.  `server/server.js`の以下の行を、あなたが配置したファイル名に書き換えてください。
    ```javascript
    const serviceAccount = require('./your-secret-key-file.json'); 
    ```

### 4. サーバーの起動
```bash
# serverディレクトリにいることを確認してください
node server.js
```
ターミナルに「サーバーが http://localhost:3000 で起動しました」と表示されれば成功です。

### 5. フロントエンドの表示
-   プロジェクトのルートにある **`demo/index.html`** ファイルをブラウザで開きます。
-   (推奨) VS Codeの拡張機能「Live Server」を使用すると、ファイルの変更が自動でブラウザに反映されるため、開発がスムーズになります。

---

## 📜 ライセンス

このプロジェクトは [MIT License](LICENSE.md) のもとで公開されています。
